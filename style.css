:root{
    --bg:#f3f6fb; --card:#ffffff; --text:#0b1220; --muted:#64748b;
    --accent:#64748b; --operator:#6366f1; --special:#10b981; --danger:#ef4444;
    --badge-green: #10b981;
    --fab-bg: #0b1220; --fab-fg: #fff;
  }
  body.dark{
    --bg:#071226; --card:#0d1b2a; --text:#e6eef8; --muted:#9ca3af;
    --accent:#94a3b8; --operator:#7c83ff; --special:#34d399; --danger:#fb7185;
    --badge-green: #34d399;
    --fab-bg: #e6eef8; --fab-fg: #071226;
  }
  *{box-sizing:border-box;font-family:Inter,Segoe UI,Arial,sans-serif}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:18px;transition:background .25s,color .25s}
  header{width:100%;max-width:1200px;display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding:12px;border-radius:10px;background:linear-gradient(90deg,var(--special),var(--operator));color:white}
  header h1{font-size:1.05rem;margin:0}
  header .hdr-actions{display:flex;gap:8px}
  .tabs{width:100%;max-width:1200px;display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap}
  .tab-btn{padding:12px 16px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(180deg,#6b7280,#4b5563);color:white;font-weight:700;box-shadow:0 8px 18px rgba(0,0,0,0.08);transition:transform .18s}
  .tab-btn:hover{transform:translateY(-4px)}
  .tab-btn.active{background:linear-gradient(180deg,var(--special),#059669);box-shadow:0 18px 36px rgba(0,0,0,0.12)}
  .layout{width:100%;max-width:1200px;display:grid;grid-template-columns:1fr 380px;gap:16px;align-items:start}
  .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 12px 30px rgba(2,6,23,0.06)}
  .calc-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .display{width:100%;height:56px;padding:10px;font-size:1.1rem;border-radius:10px;border:2px solid rgba(0,0,0,0.06);background:transparent;color:var(--text)}
  .live-result{font-size:0.92rem;color:var(--badge-green);min-height:20px;margin-top:6px}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
  button.key{padding:12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  button.num{background:#e6eef8}
  button.op{background:var(--operator);color:white}
  button.eq{background:var(--special);color:white;grid-column:span 2}
  button.clear{background:var(--danger);color:white}
  button.fn{background:#8b5cf6;color:white}
  .mode-toggle{padding:8px;border-radius:8px;border:none;background:#673ab7;color:white;cursor:pointer}
  .small{padding:8px;border-radius:8px;border:1px solid var(--accent);background:transparent;color:var(--text)}
  .two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .result-box{margin-top:10px;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:linear-gradient(180deg,rgba(255,255,255,0.6),rgba(255,255,255,0.2));color:var(--text)}
  .history-list{max-height:420px;overflow:auto;padding:6px}
  .history-item{padding:8px;border-bottom:1px dashed rgba(0,0,0,0.04);font-size:0.95rem;color:var(--muted)}
  canvas.responsive-chart{ width:100% !important; height: auto !important; max-height:320px; }
  /* pane animation */
  .pane { display:none; opacity:0; transform:translateY(8px); transition:opacity .28s ease, transform .28s ease; }
  .pane.show { display:block; opacity:1; transform:translateY(0); }
  .badge-live { display:inline-flex; align-items:center; gap:6px; font-weight:700; color:var(--badge-green); }
  .badge-dot { width:10px;height:10px;border-radius:50%;background:var(--badge-green); display:inline-block; box-shadow:0 0 6px rgba(0,0,0,0.05); }

  /* accordion */
  .acc { border-radius:8px; overflow:hidden; border:1px solid rgba(0,0,0,0.06); }
  .acc-item + .acc-item { margin-top:8px; }
  .acc-header { display:flex; align-items:center; justify-content:space-between; padding:12px; background:linear-gradient(180deg, rgba(0,0,0,0.01), rgba(0,0,0,0.02)); cursor:pointer; }
  .acc-header h4 { margin:0; display:flex; align-items:center; gap:8px; font-size:1rem; }
  .acc-body { padding:0 12px; border-top:1px solid rgba(0,0,0,0.04); background:transparent; overflow:hidden; max-height:0; opacity:0; transition:max-height .36s cubic-bezier(.2,.9,.2,1), opacity .28s ease, padding .28s; }
  .acc-item.open .acc-body { padding:12px; max-height:520px; opacity:1; }
  .icon { font-size:1.1rem; display:inline-block; width:28px; text-align:center; border-radius:6px; padding:4px; }
  .acc-arrow { transition:transform .28s ease; display:inline-block; margin-left:8px; }
  .acc-item.open .acc-arrow { transform:rotate(180deg); }

  /* Advanced unit converter tabs */
  .u-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
  .u-tab{padding:8px 10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);cursor:pointer;background:transparent;display:flex;align-items:center;gap:8px}
  .u-tab.active{background:linear-gradient(180deg,rgba(0,0,0,0.02),rgba(0,0,0,0.01));box-shadow:0 8px 18px rgba(0,0,0,0.04)}
  .u-tab .dot{width:10px;height:10px;border-radius:50%;display:inline-block}
  .u-panel{padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.04);background:transparent;transition:opacity .2s}
  .swap-btn{padding:8px;border-radius:8px;border:1px dashed rgba(0,0,0,0.06);cursor:pointer;background:transparent}
  /* floating action button */
  #scrollTopBtn{
    position:fixed;right:18px;bottom:18px;width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;
    box-shadow:0 12px 30px rgba(2,6,23,0.2);background:var(--fab-bg);color:var(--fab-fg);border:none;cursor:pointer;opacity:0;transform:translateY(8px) scale(.96);
    transition:opacity .32s, transform .48s;
    z-index:9999;
  }
  #scrollTopBtn.show{opacity:1;transform:translateY(0) scale(1);animation:bounceIn .7s}
  @keyframes bounceIn{0%{transform:translateY(12px) scale(.9)}40%{transform:translateY(-6px) scale(1.05)}100%{transform:translateY(0) scale(1)}}
  #scrollTopBtn:hover{transform:scale(1.06)}
  /* small responsiveness */
  @media(max-width:1100px){ .layout{grid-template-columns:1fr} .history-list{max-height:260px} canvas.responsive-chart{max-height:220px} .icon{width:24px} .u-tab{font-size:0.9rem} }
  /* BMI badges */
  .bmi-badge {display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;color:white}
  .bmi-under {background:#3b82f6}
  .bmi-normal {background:#10b981}
  .bmi-over {background:#f59e0b}
  .bmi-obese {background:#ef4444}